<md-card tabindex="0" (blur)="checkValidation()" chyMaterialActive>
    <form [formGroup]="workForm" (ngSubmit)="checkValidation()">
        <md-card-content>
            <md-form-field class="project">
                <input mdInput placeholder="Project" formControlName="project" [mdAutocomplete]="auto">
                <md-error>Required</md-error>
            </md-form-field>
            <md-autocomplete #auto="mdAutocomplete" [displayWith]="displayFn">
                <md-option *ngFor="let project of filteredProjects | async" [value]="project">
                    <span>{{ project.name }}  |  {{ project.number }} </span>
                </md-option>
            </md-autocomplete>
            <button md-icon-button type="button" class="delete-button" (click)="removeWork()"
                    tabindex="-1">
                <md-icon>clear</md-icon>
            </button>

            <div class="flex-row">
                <md-form-field>
                    <input mdInput placeholder="From" #from formControlName="from" [(ngModel)]="work.from"
                           (blur)="formatTime(work.from, 'from')" (focus)="from.select()">
                    <md-error>Required format: hh:mm</md-error>
                </md-form-field>
                <md-form-field>
                    <input mdInput placeholder="To" #to formControlName="to" [(ngModel)]="work.to"
                           (blur)="formatTime(work.to, 'to')" (focus)="to.select()">
                    <md-error *ngIf="toControl.hasError('required') || toControl.hasError('pattern')">Required
                        format:
                        hh:mm
                    </md-error>
                    <md-error
                            *ngIf="!(toControl.hasError('required') || toControl.hasError('pattern')) && toControl.hasError('isNotAfter')">
                        "To time" isn't after from time
                    </md-error>
                </md-form-field>
            </div>

            <!--<input mdInput placeholder="Comment" formControlName="comment">-->
            <md-form-field class="comment">
                <input mdInput placeholder="Comment" formControlName="comment" [mdAutocomplete]="commentAuto">
                <md-error>Required</md-error>
            </md-form-field>
            <md-autocomplete #commentAuto="mdAutocomplete">
                <md-option *ngFor="let comment of filteredComments | async" [value]="comment.value">
                    <span>{{ comment.value }}</span>
                </md-option>
            </md-autocomplete>

        </md-card-content>
        <md-card-footer>
            <div class="spent">
                {{work.spent}} h
            </div>
        </md-card-footer>
    </form>
</md-card>