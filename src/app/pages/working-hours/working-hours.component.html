<md-sidenav-container>
    <md-sidenav #subsidenav mode="{{sidenavMode}}">
        <chy-sidenav-daypicker (daySelected)="checkSubsidenav()"></chy-sidenav-daypicker>
    </md-sidenav>

    <div>
        <md-toolbar color="primary" class="mat-elevation-z8">
            <button *ngIf="media.isActive('xs')" md-icon-button type="button" (click)="subsidenav.open()">
                <md-icon>date_range</md-icon>
            </button>
            Working Hours
            <span class="fill-remaining-space">
                <button md-button class="btn-today" (click)="SetActiveDateToToday()">
                Today
                <md-icon>
                    today
                </md-icon>
            </button>
            </span>
            <!-- span is necessary because the browser doesn't show the tooltip when the button is disabled -->
            <span class="btn-floating" mdTooltip="You have an unfinished card open."
                  [mdTooltipPosition]="'left'" [mdTooltipDisabled]="!newCard">
                <button md-fab [disabled]="newCard" (click)="newWork()">
                    <md-icon>add</md-icon>
                </button>
            </span>
        </md-toolbar>
        <div class="inner-sidenav-content">

            <h2 class="title">
                {{ date | date:'dd. MMMM yyyy' }}
            </h2>

            <span *ngIf="works|| async">
                    <span class="container" *ngIf="works.length; else noData">
                        <chy-work-card *ngFor="let work of works"
                                       [work]="work"
                                       [projects]="projectsService.dataChange | async"
                                       [comments]="commentsService.dataChange | async"
                                       (saveWork)="saveWork(work)" (persistNewWork)="persistNewWork(work)"
                                       (deleteWork)="deleteWork(work)"></chy-work-card>
                    </span>

                    <ng-template #noData>
                        <md-card class="no-data">
                            <md-card-content>
                                <button md-button class="no-data-action" (click)="newWork()">
                                    <md-icon>
                                        timelapse
                                    </md-icon>
                                    <p>Add working hours for this day!</p>
                                </button>
                            </md-card-content>
                        </md-card>
                    </ng-template>
                </span>
        </div>
    </div>
</md-sidenav-container>